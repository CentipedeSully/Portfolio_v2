<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Sky Ingre Tracker</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <script defer src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
        crossorigin="anonymous"></script>
    <script defer src="skyScript.js"></script>
</head>

<body>
    <!-- ========== Navbar ========== -->
    <div class="navbar bg-dark">

    </div>

    <!-- ========== Body ========== -->
    <div class="container pt-5 text-center">
        <!-- Page Intro -->
        <div class="row">
            <div class="row bg-secondary-subtle rounded">
                <h1 class="">Skyrim Ingredient Tracker</h1>
                <p class="fst-italic pb-2 font-size">
                    Created by
                    <span style="font-style: normal;">Sully</span>
                    (<a href="https://github.com/CentipedeSully/IngredientTracker_Javascript/tree/main">Visit Github</a>)
                </p>
            </div>
            <p class="pt-1">
                <small>
                    This utility is meant to help players track their alchemical progress while
                    using the
                    <a href="https://www.nexusmods.com/skyrimspecialedition/mods/20983" style="text-decoration: none;">
                        Spell-Research Mod.
                    </a>
                </small>
            </p>
        </div>

        <!-- Import/Export Area -->
        <form action="" id="file-form" class="mb-3 mt-3">
            <div class="row justify-content-center align-items-end gap-2">

                <div class="col-3">
                    <input type="file" id="import-input" accept=".csv" class="form-control">
                </div>

                <button id="import-btn" class="btn btn-outline-success btn-sm px-3 col-auto"
                    type="button">Import</button>

                <button id="export-btn" class="btn btn-outline-secondary btn-sm px-3 col-auto"
                    type="button">Export</button>

            </div>
        </form>


        <!-- Input & Display Row -->
        <div class="row justify-content-center">

            <!-- Inputs -->
             <div id="input-field" class="bg-secondary-subtle rounded col-12">
                <form  class="" action="" id="query-form">
                    <div class="row py-3 justify-content-center">
    

                        <!-- top-most buttons -->
                        <div class="row justify-content-between pb-1">
                            <div class="col-2 ">
                                <!-- query buttons -->
                                <span class="btn-group">
                                    <input type="radio" class="btn-check" name="query-context" id="search-context-btn" checked>
                                    <label for="search-context-btn" class="btn btn-outline-secondary  btn-sm">Search</label>
                                    <input type="radio" class="btn-check" name="query-context" id="add-context-btn">
                                    <label for="add-context-btn" class="btn btn-outline-success  btn-sm">Add</label>
                                    <input type="radio" class="btn-check" name="query-context" id="remove-context-btn">
                                    <label for="remove-context-btn" class="btn btn-outline-danger  btn-sm">Remove</label>
                                </span>
                            </div>
    
                            <div class="col-2 text-end">
                                <!-- clear Button-->
                                <span class="text-end">
                                    <button id="clear-query-btn" class="btn btn-outline-secondary btn-sm" type="button">Clear</button>
                                </span>
                            </div>
                        </div>
                        

                        <!-- Input Fields -->
                        <div class="row pt-3 pb-1">

                            <!-- Ingredient field -->
                            <div class="col-3">
                                <input id="ingredient-name-input" name="ingredientName" class="form-control query-input text-center"
                                        type="text" placeholder="---">
                                        <div class="pt-1">
                                            <label class="form-label" for="ingredient-name-input">Ingredient Name</label>
                                        </div>
                            </div>
    

                            <!-- Chemcial area field-->
                            <div class="col">
                                <div class="row justify-content-end">

                                    <!-- chem name -->
                                    <div class="col-6">
                                        <input id="chemical-name-input" name="chemicalName" class="form-control query-input text-center"
                                        type="text" placeholder="---">
                                        <div class="pt-1">
                                            <label class="form-label" for="chemical-name-input">Component Name</label>
                                        </div>
                                    </div>

                                    <!-- min -->
                                    <div class="col-3 query-bounds-info" id="chem-min-input-container">
                                        <input id="chem-min-input" name="chemMin" class="form-control query-input text-center"
                                        type="number" placeholder="---" value="1" min="1" max="999">
                                        <div class="pt-1">
                                            <label class="form-label" for="chem-min-input">Min</label>
                                        </div>
                                    </div>

                                    <!-- max -->
                                    <div class="col-3 query-bounds-info" id="chem-max-input-container">
                                        <input id="chem-max-input" name="chemMax" class="form-control query-input text-center"
                                        type="number" placeholder="---" value="999" min="1" max="999">
                                        <div class="pt-1">
                                            <label class="form-label" for="chem-max-input">Max</label>
                                        </div>
                                    </div>

                                    <!-- amount -->
                                    <div class="col-3 query-qty-info d-none" id="chem-amount-input-container">
                                        <input id="chem-amount-input" name="chemAmount" class="form-control query-input text-center"
                                        type="number" placeholder="---" value="1" min="1" max="999">
                                        <div class="pt-1">
                                            <label class="form-label" for="chem-amount-input">Quantity</label>
                                        </div>
                                    </div>

                                </div>
                            </div>

                            
                            <!-- Add-chem-to-query button-->
                            <div class="text-end col-2 ">
                                <button id="add-to-query-btn" class="btn btn-outline-secondary btn-sm" type="button">Add to Query</button>
                            </div>
                        </div>

                        <hr>


                        <!-- Current query items area-->
                        <div class="row justify-content-center pt-4 pb-5 px-1">

                            <!-- Ingredient -->
                            <div class="row justify-content-center pb-3" id="ingredient-query-container">
                                <!-- dynamic html lives here -->
                            </div>

                            <!-- Chemicals -->
                            <div class="row justify-content-center gap-2" id="chemical-query-container">
                                <!-- dynamic html lives here -->
                            </div>
                            
                        </div>


                        <!-- Go Button -->
                         <div class="row">
                            <!-- Clear/Submit query buttons -->
                            <span class="col text-end">
                                <button id="submit-query-btn" class="btn btn-outline-success " type="button">Submit Query</button>
                            </span>
                         </div>
                        

                        
                    </div>
                </form>
             </div>
            


             <!-- Output Log -->
             <div class="row pb-2">
                <div class="mt-2 ms-1 border rounded bg-light" id="log-output"
                    style="height: 5lh; overflow: scroll;">
                    <!-- Action logs go here -->
                </div>
                <div class="d-flex justify-content-end pt-2">
                    <button id="clear-output-log-btn" class="btn btn-outline-danger btn-sm">Clear Log</button>
                </div>
            </div>
            

            <!-- Display -->
            <div class="col-12 pt-5" id="full-display-area">
                <div class="row justify content-center text-center">
                    <h4>Display</h4>
                </div>

                <!-- Sort/Title/Clear display buttons/labels -->
                <div class="row">
                    <div class="d-flex justify-content-between pb-2 px-3 gap-1 flex-wrap">
                        <div class="dropdown">
                            <button id="sort-display-btn" class="btn btn-outline-secondary btn-sm dropdown-toggle"
                                type="button" data-bs-toggle="dropdown">
                                Sort
                            </button>
                            <ul class="dropdown-menu">
                                <li><button
                                        class="btn btn-sm btn-outline-secondary dropdown-item active">Alphabetical</button>
                                </li>
                                <li><button class="btn btn-sm btn-outline-secondary dropdown-item">Ascending</button>
                                </li>
                                <li><button class="btn btn-sm btn-outline-secondary dropdown-item">Descending</button>
                                </li>
                            </ul>
                        </div>

                        <div>
                            <div class="row">
                                <p class="fst-italic">
                                    <span>Currently showing </span>
                                    <span id="current-table-population-display">0</span>
                                    <span>of</span>
                                    <span id="total-database-population-display">0</span>
                                    <span>database ingredients</span>
                                </p>
                            </div>
                        </div>

                        <button id="clear-display-btn" class="btn btn-outline-danger btn-sm" type="button">Clear
                            Display</button>
                    </div>
                </div>

                <!-- Table display -->
                <div class="row">
                    <div class="border rounded p-2 ms-1 overflow-scroll" style="max-height: 400px; height: 13lh;">
                        <table class="table table-striped table-sm">
                            <thead class="table-primary">
                                <tr>
                                    <th class="fst-italic">Index</th>
                                    <th>Ingredient</th>
                                    <th>Chems</th>
                                    <th>Qty</th>
                                </tr>
                            </thead>
                            <tbody id="display-table-body" class="table-group-divider">
                                <!-- Table entries go here! They're also built dynamically using Javascript -->
                            </tbody>
                            <tfoot class="table-group-divider">
                                <tr class="table-primary">
                                    <td>-</td>
                                    <td>END</td>
                                    <td>-</td>
                                    <td>-</td>
                                </tr>
                            </tfoot>
                        </table>
                    </div>
                </div>

            </div>
        </div>

        <!-- Directions! -->
        <div class="row border rounded mt-5">
            <h3 class="py-3 bg-secondary-subtle">How To Use:</h3>
            <div class="py-2">
                <h5 class="">Step 1: Specify a query context</h5>
                <div class="px-5 pb-4">
                    <p>
                        Specify a query context from the provided contexts: <span class="fst-italic fs-5">Search,
                            Add</span>
                        or <span class="fst-italic fs-5">Remove</span>. The context of the query will define the
                        application's behavior.
                    </p>
                    <h5 class="fst-italic">Search:</h5>
                    <p>This context displays all relevant data based on the submitted query.
                        An empty query results in showing all data. Specifying chemicals only
                        results in showing all ingredients that contain all specified chemicals.
                        Search queries are also <span class="fst-italic">implicit</span>; submitting a
                        query with ingredient named 'a' will display all ingredients that contain 'a' in their
                        name. Same with chemicals.</p>
                    <p>This context does not change the data in any way.</p>
                    <h5 class="fst-italic">Add:</h5>
                    <p>This context adds the specified ingredient to the database if the ingredient doesn't already
                        exist. If the ingredient already exists, then the specified ingredient is instead updated;
                        any chemical specified that doesn't exist within the ingredient will be added, and any chemical
                        that does exist
                        will be overwritten.
                    </p>
                    <p>This context DOES change the data, but doesn't update the display. Empty entries are not allowed.
                    </p>
                    <h5 class="fst-italic">Remove:</h5>
                    <p>This context removes the specified ingredient's chemcials from the database.
                        If a 'remove' query specifies an ingredient while providing no chemical information, then that
                        ingredient
                        along with all of its chemicals will be removed from the database (if that ingrdient exists).
                    </p>
                    <p>To remove specific info regarding an ingredient's chemical composition, simply specify the target
                        ingredient
                        along with all of the ingredient's chemicals you wish to remove.
                    </p>
                    <p>This context DOES change the data, but doesn't update the display. Empty entries are not allowed.
                    </p>
                </div>
                <h5 class="">Step 2: Build the query</h5>
                <div class="px-5 pb-4">
                    <p>
                        Build a query by filling out all the necessary fields. Add as many chemical fields as
                        necessary using the '+' button. The '-' button removes chemical
                        fields. Empty chemical fields are ignored.
                    </p>
                    <p>
                        Use the 'Clear' button to quickly empty the current query.
                    </p>
                </div>
                <h5 class="">Step 3: Submit</h5>
                <div class="px-5 pb-4">
                    <p>
                        Once the query is built, press 'Submit'. It's function depends on the current query context,
                        but the build query's fields will persist until it is cleared.
                    </p>
                </div>
                <h5 class="">Additional Features:</h5>
                <div class="px-5 pb-4">
                    <p>
                        Save data by exporting the current data as a file, and load data by importing an ingredient (.csv) data file.
                    </p>
                </div>
            </div>
        </div>
    </div>
</body>

</html>